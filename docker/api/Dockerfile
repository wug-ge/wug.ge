FROM node:22

COPY . .

ARG CONTACT_EMAIL
ENV CONTACT_EMAIL=$CONTACT_EMAIL

ARG GMAIL_USER
ENV GMAIL_USER=$GMAIL_USER
ARG GMAIL_PASS
ENV GMAIL_PASS=$GMAIL_PASS

WORKDIR /api

RUN npm install
RUN npm run build

CMD  ["node", "dist/index.js"]